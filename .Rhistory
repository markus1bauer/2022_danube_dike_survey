cols(
.default = "?",
plot = "f",
block = "f",
comparison = "f",
exposition = "f",
side = "f",
locationYear = "f"
)) %>%
rename(y = D_presence) %>%
mutate(across(where(is.numeric) & !y, scale))
### Load data ###
sites <- read_csv("data_processed_sites_temporal.csv", col_names = TRUE,
na = c("", "na", "NA"), col_types =
cols(
.default = "?",
plot = "f",
block = "f",
comparison = "f",
exposition = "f",
side = "f",
locationYear = "f"
)) %>%
rename(y = D_presence) %>%
filter(comparison == "1718" | comparison == "1719" | comparison == "1721") %>%
mutate(across(where(is.numeric) & !y, scale))
### * Model ####
m2 <- blmer(log(y) ~ comparison + exposition * PC1soil + PC2soil + PC3soil +
side + distanceRiver + locationYear + abundance +
(1|plot),
REML = T,
control = lmerControl(optimizer = "Nelder_Mead"),
cov.prior = wishart,
data = sites)
### Packages ###
library(here)
library(tidyverse)
library(blme)
library(ggeffects)
library(ggbeeswarm)
### Start ###
rm(list = setdiff(ls(), c("graph_a", "graph_b", "graph_c", "graph_d")))
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites_temporal.csv", col_names = TRUE,
na = c("", "na", "NA"), col_types =
cols(
.default = "?",
plot = "f",
block = "f",
comparison = "f",
exposition = "f",
side = "f",
locationYear = "f"
)) %>%
rename(y = D_presence) %>%
filter(comparison == "1718" | comparison == "1719" | comparison == "1721") %>%
mutate(across(where(is.numeric) & !y, scale))
### * Model ####
m2 <- blmer(log(y) ~ comparison + exposition * PC1soil + PC2soil + PC3soil +
side + distanceRiver + locationYear + abundance +
(1|plot),
REML = T,
control = lmerControl(optimizer = "Nelder_Mead"),
cov.prior = wishart,
data = sites)
### * Functions ####
themeMB <- function() {
theme(
panel.background = element_rect(fill = "white"),
text  = element_text(size = 9, color = "black"),
strip.text = element_text(size = 10),
axis.text = element_text(angle = 0, hjust = 0.5, size = 9, color = "black"),
axis.title = element_text(angle = 0, hjust = 0.5, size = 9, color = "black"),
axis.line = element_line(),
legend.key = element_rect(fill = "white"),
legend.position = "none",
legend.margin = margin(0, 0, 0, 0, "cm"),
plot.margin = margin(0, 0, 0, 0, "cm")
)
}
# Beta diversity on dike grasslands
# Plot Fig A5 ####
# Markus Bauer
# 2022-01-11
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# A Preparation #########################################################
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
### Packages ###
library(here)
library(tidyverse)
library(blme)
library(ggeffects)
library(ggbeeswarm)
### Start ###
rm(list = setdiff(ls(), c("graph_a", "graph_b", "graph_c", "graph_d")))
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites_temporal.csv", col_names = TRUE,
na = c("", "na", "NA"), col_types =
cols(
.default = "?",
plot = "f",
block = "f",
comparison = "f",
exposition = "f",
side = "f",
locationYear = "f"
)) %>%
rename(y = D_presence) %>%
filter(comparison == "1718" | comparison == "1719" | comparison == "1721") %>%
mutate(across(where(is.numeric) & !y, scale))
### * Model ####
m2 <- blmer(log(y) ~ comparison + exposition * PC1soil + PC2soil + PC3soil +
side + distanceRiver + locationYear + abundance +
(1|plot),
REML = T,
control = lmerControl(optimizer = "Nelder_Mead"),
cov.prior = wishart,
data = sites)
### * Functions ####
themeMB <- function() {
theme(
panel.background = element_rect(fill = "white"),
text  = element_text(size = 9, color = "black"),
strip.text = element_text(size = 10),
